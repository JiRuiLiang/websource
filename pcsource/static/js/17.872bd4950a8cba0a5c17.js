webpackJsonp([17],{Xd8F:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("TQvf"),n=s.n(a),i=s("NYxO"),r={props:{dataInfo:{type:Object,default:function(){}},poolAbi:{type:String,default:function(){return""}}},methods:{getOpenAndEndTime:function(){return this.$util.formatTimeToStr(1e3*parseInt(this.dataInfo.starttime),"yyyy-MM-dd hh:mm")+" - "+this.$util.formatTimeToStr(1e3*parseInt(this.dataInfo.endtime),"yyyy-MM-dd hh:mm")},getIcon:function(t){return this.dataInfo&&this.dataInfo.length?erc20IconObj[this.dataInfo[t].toLowerCase()]:""}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reward-item"},[s("el-row",{staticClass:"list"},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"coin-container"},[s("div",{staticClass:"coin"},[s("img",{attrs:{src:t.dataInfo.icon1,alt:""}}),t._v(" "),s("div",[t._v(t._s(t.dataInfo.name1))])]),t._v(" "),s("div",{staticClass:"line"}),t._v(" "),s("div",{staticClass:"coin"},[s("img",{attrs:{src:t.dataInfo.icon2,alt:""}}),t._v(" "),s("div",[t._v(t._s(t.dataInfo.name2))])])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_31")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.inviteNum)))])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_32")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.activeNum)))])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_33")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t.dataInfo.inviteRate)+"%")])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"right"},[s("div",{staticClass:"pool"},[t._v("Pool #"+t._s(t.dataInfo.index))]),t._v(" "),s("div",{staticClass:"start-time"},[t._v("\n                    "+t._s(t.getOpenAndEndTime())+"\n                ")])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_34")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.InviterReward)))])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_35")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.noGet)))])])])],1)],1)},staticRenderFns:[]};var o=s("VU/8")(r,c,!1,function(t){s("izyA")},"data-v-4539c073",null).exports,l=s("Tnm7"),d=s("ytf2");function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function a(n,i){try{var r=e[n](i),c=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(c).then(function(t){a("next",t)},function(t){a("throw",t)});t(c)}("next")})}}var v={components:{RewardItem:o},data:function(){return{list:[],list2:[],detailList:[],poolAbi:"",poolAbi2:"",abi:"",address:"",address2:"",isRequest:!1}},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t})({},Object(i.c)({mateMaskToken:function(t){return t.app.mateMaskToken}})),watch:{mateMaskToken:function(){this.initConfig()}},mounted:function(){var t=this;this.initConfig(),this.$nextTick(function(){t.initCopy()})},methods:{getUrl:function(){return window.location.origin+"/staking?address="+this.mateMaskToken},initCopy:function(){var t=this,e=document.getElementById("copyBtn"),s=new n.a(e);s.on("success",function(){t.$message.success(t.$t("message.lang_62"))}),s.on("error",function(t){})},initConfig:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var s,a,n,i,r,c,o,u,v,m,f,p,_,k,h,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isRequest){e.next=2;break}return e.abrupt("return");case 2:return t.isRequest=!0,t.list=[],t.detailList=[],s=t.$util.getChainKey(),e.next=8,t.$api.GetSystemConfig({sAppId:s,sKey1:"ERC20"});case 8:return a=e.sent,Object(l.k)(a.vList),e.next=12,t.$api.GetSystemConfig({sAppId:s,sKey1:"Stake"});case 12:for(n=e.sent,i=n.vList,r=!0,c=!1,o=void 0,e.prev=17,u=i[Symbol.iterator]();!(r=(v=u.next()).done);r=!0)"dataAbi"===(m=v.value).sKey2?t.abi=m.sValue:"stakeAddress"===m.sKey2?t.address=m.sValue:"poorAbi"===m.sKey2?t.poolAbi=m.sValue:"stakeAddress2"===m.sKey2?t.address2=m.sValue:"poorAbi2"===m.sKey2&&(t.poolAbi2=m.sValue);e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),c=!0,o=e.t0;case 25:e.prev=25,e.prev=26,!r&&u.return&&u.return();case 28:if(e.prev=28,!c){e.next=31;break}throw o;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return Object(d.b)(),t.contract=new web3.eth.Contract(JSON.parse(t.abi),t.address),e.next=37,t.contract.methods.getPoolsLength().call();case 37:f=e.sent,p=0;case 39:if(!(p<f)){e.next=47;break}return e.next=42,t.contract.methods.getPoolInfo(p).call();case 42:_=e.sent,t.list.push(_);case 44:p++,e.next=39;break;case 47:if(!t.address2){e.next=61;break}return t.contract2=new web3.eth.Contract(JSON.parse(t.abi),t.address2),e.next=51,t.contract2.methods.getPoolsLength().call();case 51:k=e.sent,h=0;case 53:if(!(h<k)){e.next=61;break}return e.next=56,t.contract2.methods.getPoolInfo(h).call();case 56:x=e.sent,t.list2.push(x);case 58:h++,e.next=53;break;case 61:t.updateList();case 62:case"end":return e.stop()}},e,t,[[17,21,25,33],[26,,28,32]])}))()},updateList:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var s,a,n,i,r,c,o,d,u,v,m,f,p,_,k,h,x,C,g,b,I,w,y,T,$,A,R,O,M,L,N,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(new Date).getTime()/1e3,a=0,!t.mateMaskToken||!t.list.length){e.next=75;break}n=!0,i=!1,r=void 0,e.prev=6,c=t.list[Symbol.iterator]();case 8:if(n=(o=c.next()).done){e.next=61;break}return d=o.value,a++,u=new web3.eth.Contract(JSON.parse(t.poolAbi),d[6]),v=new web3.eth.Contract(JSON.parse(l.s),d[3]),e.next=15,v.methods.decimals().call();case 15:return m=e.sent,(f={}).name1=d[0],f.name2=d[1],f.icon2=l.f[d[3].toLowerCase()],f.icon1=l.f[d[2].toLowerCase()],f.starttime=d[4],f.endtime=d[5],f.index=a,e.next=26,u.methods.getAccountCountOfInviter(t.mateMaskToken).call();case 26:return f.inviteNum=e.sent,e.next=29,u.methods.getActiveAccountCountOfInviter(t.mateMaskToken).call();case 29:return f.activeNum=e.sent,e.next=32,u.methods.getInviterReward(t.mateMaskToken).call();case 32:return f.InviterReward=e.sent,e.next=35,u.methods.getInviteRate(t.mateMaskToken).call();case 35:return f.inviteRate=e.sent,e.next=38,u.methods.getAccountCountOfInviter(t.mateMaskToken).call();case 38:p=e.sent,_=0,k=0;case 41:if(!(k<p)){e.next=52;break}return e.next=44,u.methods.getAccountOfInviter(t.mateMaskToken,k).call();case 44:return h=e.sent,e.next=47,u.methods.earned(h).call();case 47:x=e.sent,_+=parseFloat(t.$util.fromWei(x,m,4));case 49:k++,e.next=41;break;case 52:if(_=_/100*parseFloat(f.inviteRate),f.InviterReward=parseFloat(t.$util.fromWei(f.InviterReward+"",m,4)).toFixed(4),f.noGet=_.toFixed(4),!(parseInt(f.endtime)<s)||parseInt(f.inviteNum)){e.next=57;break}return e.abrupt("continue",58);case 57:t.detailList.push(f);case 58:n=!0,e.next=8;break;case 61:e.next=67;break;case 63:e.prev=63,e.t0=e.catch(6),i=!0,r=e.t0;case 67:e.prev=67,e.prev=68,!n&&c.return&&c.return();case 70:if(e.prev=70,!i){e.next=73;break}throw r;case 73:return e.finish(70);case 74:return e.finish(67);case 75:if(!t.mateMaskToken||!t.list2.length){e.next=148;break}C=!0,g=!1,b=void 0,e.prev=79,I=t.list2[Symbol.iterator]();case 81:if(C=(w=I.next()).done){e.next=134;break}return y=w.value,a++,T=new web3.eth.Contract(JSON.parse(t.poolAbi2),y[6]),$=new web3.eth.Contract(JSON.parse(l.s),y[3]),e.next=88,$.methods.decimals().call();case 88:return A=e.sent,(R={}).name1=y[0],R.name2=y[1],R.icon2=l.f[y[3].toLowerCase()],R.icon1=l.f[y[2].toLowerCase()],R.starttime=y[4],R.endtime=y[5],R.index=a,e.next=99,T.methods.getAccountCountOfInviter(t.mateMaskToken).call();case 99:return R.inviteNum=e.sent,e.next=102,T.methods.getActiveAccountCountOfInviter(t.mateMaskToken).call();case 102:return R.activeNum=e.sent,e.next=105,T.methods.getInviterReward(t.mateMaskToken).call();case 105:return R.InviterReward=e.sent,e.next=108,T.methods.getInviteRate(t.mateMaskToken).call();case 108:return R.inviteRate=e.sent,e.next=111,T.methods.getAccountCountOfInviter(t.mateMaskToken).call();case 111:O=e.sent,M=0,L=0;case 114:if(!(L<O)){e.next=125;break}return e.next=117,T.methods.getAccountOfInviter(t.mateMaskToken,L).call();case 117:return N=e.sent,e.next=120,T.methods.earned(N).call();case 120:S=e.sent,M+=parseFloat(t.$util.fromWei(S,A,4));case 122:L++,e.next=114;break;case 125:if(M=M/100*parseFloat(R.inviteRate),R.InviterReward=parseFloat(t.$util.fromWei(R.InviterReward+"",A,4)).toFixed(4),R.noGet=M.toFixed(4),!(parseInt(R.endtime)<s)||parseInt(R.inviteNum)){e.next=130;break}return e.abrupt("continue",131);case 130:t.detailList.push(R);case 131:C=!0,e.next=81;break;case 134:e.next=140;break;case 136:e.prev=136,e.t1=e.catch(79),g=!0,b=e.t1;case 140:e.prev=140,e.prev=141,!C&&I.return&&I.return();case 143:if(e.prev=143,!g){e.next=146;break}throw b;case 146:return e.finish(143);case 147:return e.finish(140);case 148:t.isRequest=!1;case 149:case"end":return e.stop()}},e,t,[[6,63,67,75],[68,,70,74],[79,136,140,148],[141,,143,147]])}))()}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"invite-staking"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("message.stake_28")))]),t._v(" "),s("i",{staticClass:"iconfont icon-shuaxing",on:{click:function(e){return t.initConfig()}}}),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"main-container"},[s("div",{staticClass:"top"},[s("div",{staticClass:"tips"},[s("div",{staticClass:"txt11"},[t._v(t._s(t.$t("message.stake_37")))]),t._v(" "),s("div",{staticClass:"txt22"},[s("span",{staticClass:"level"},[t._v(t._s(t.$t("message.stake_38")))]),t._v(" "+t._s(t.$t("message.stake_44")))]),t._v(" "),s("div",{staticClass:"txt22"},[s("span",{staticClass:"level"},[t._v(t._s(t.$t("message.stake_39")))]),t._v(" "+t._s(t.$t("message.stake_45")))]),t._v(" "),s("div",{staticClass:"txt22"},[s("span",{staticClass:"level"},[t._v(t._s(t.$t("message.stake_40")))]),t._v(" "+t._s(t.$t("message.stake_46")))]),t._v(" "),s("div",{staticClass:"tipsl tipsl1"},[t._v(t._s(t.$t("message.stake_41")))]),t._v(" "),s("div",{staticClass:"tipsl"},[t._v(t._s(t.$t("message.stake_42")))]),t._v(" "),s("div",{staticClass:"tipsl"},[t._v(t._s(t.$t("message.stake_43")))])]),t._v(" "),s("div",{staticClass:"invite-url"},[s("div",{staticClass:"url"},[s("span",{staticClass:"desc"},[t._v(t._s(t.$t("message.stake_29"))+":")]),t._v(" "),s("span",{staticClass:"link"},[t._v(t._s(t.getUrl()))]),t._v(" "),s("i",{staticClass:"iconfont icon-fuzhi",attrs:{id:"copyBtn","data-clipboard-action":"copy","data-clipboard-text":t.getUrl()}})])])]),t._v(" "),s("div",{staticClass:"desc reward"},[t._v(t._s(t.$t("message.stake_30"))+":")]),t._v(" "),s("div",{staticClass:"bottom"},t._l(t.detailList,function(t,e){return s("reward-item",{key:e,attrs:{dataInfo:t}})}),1)])])])},staticRenderFns:[]};var f=s("VU/8")(v,m,!1,function(t){s("wdD7")},"data-v-598e9727",null);e.default=f.exports},izyA:function(t,e){},wdD7:function(t,e){}});