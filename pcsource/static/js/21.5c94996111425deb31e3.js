webpackJsonp([21],{"2AnY":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("TQvf"),n=a.n(s),r=a("NYxO"),i=a("WBHA"),c=a.n(i),o=a("ytf2"),l=a("Tnm7"),u=a("TIfe"),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t};function d(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function m(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(n,r){try{var i=e[n](r),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){s("next",t)},function(t){s("throw",t)});t(c)}("next")})}}var p={components:{countTo:c.a},name:"user",data:function(){return{email:"",intervalTimer:null,copySuccess:!1,copySuccess1:!1,balanceShow:!1,isShow:!1,activeRecord:"wa",eraxInfo:{},startVal:0,endVal:0,BonusUsdt:10,sInviteCode:"",orgTabList:[{to:"/accounts/erac",label:"message.Accounts_41"},{to:"/accounts/nft",label:"message.Accounts_42"},{to:"/accounts/favorite",label:"message.Accounts_05"},{to:"/accounts/follow",label:"message.Accounts_06"}],tabsList:[],uWallet:"",recordGold:[{time:"2021-04-18",prise:5124,totalPrise:15372},{time:"2021-04-18",prise:5124,totalPrise:15372},{time:"2021-04-18",prise:534,totalPrise:15372}],recordAirdrop:[{time:"2021-04-18",mission:"首次分享",prise:5124,totalPrise:153762},{time:"2021-04-19",mission:"首次分享",prise:5124,totalPrise:153372},{time:"2021-04-20",mission:"首次分享",prise:524,totalPrise:15372},{time:"2021-04-21",mission:"首次分享",prise:524,totalPrise:15372},{time:"2021-04-22",mission:"首次分享",prise:524,totalPrise:153572},{time:"2021-04-23",mission:"首次分享",prise:524,totalPrise:15372},{time:"2021-04-24",mission:"首次分享",prise:54,totalPrise:155472},{time:"2021-04-25",mission:"首次分享",prise:54,totalPrise:15372}],isFetching:!1,isFetchShow:!1,balanceVal:0}},computed:v({},Object(r.b)(["token","userInfo"]),Object(r.c)({cashDic:function(t){return t.app.cashDic},BTCUSDT:function(t){return t.app.BTCUSDT},ETHUSDT:function(t){return t.app.ETHUSDT},BRDBTC:function(t){return t.app.BRDBTC},NERAUSDT:function(t){return t.app.NERAUSDT}})),watch:{token:function(t,e){return t},userInfo:function(t){return t},balanceVal:function(t,e){if(!e)return this.startVal=t,this.endVal=t,t;this.startVal=e,this.endVal=t}},mounted:function(){var t=this;return m(regeneratorRuntime.mark(function e(){var a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initPageUser();case 2:return e.next=4,t.$api.QueryUserInfo({idle:0});case 4:a=e.sent,s=a.stAuth,t.email=s.sEmail,t.sInviteCode=s.sInviteCode,t.$nextTick(function(){t.initCopy()}),t.getBonus();case 10:case"end":return e.stop()}},e,t)}))()},methods:{getBonus:function(){var t=this;return m(regeneratorRuntime.mark(function e(){var a,s,n,r,i,c,u,v,d,m,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.GetSymbolTick();case 2:if(t.BonusUsdt=0,Object(o.b)(),!l.e){e.next=43;break}return a=new web3.eth.Contract(JSON.parse(l.d),l.e),e.next=8,a.methods.getTokenList().call();case 8:return s=e.sent,e.next=11,a.methods.getBalanceOfAccountETH(t.token).call();case 11:n=e.sent,t.BonusUsdt+=parseFloat(t.getUSDT("ETH",parseFloat(n)/1e18)),r=!0,i=!1,c=void 0,e.prev=16,u=s[Symbol.iterator]();case 18:if(r=(v=u.next()).done){e.next=29;break}return d=v.value,e.next=22,a.methods.getBalanceOfAccountToken(d,t.token).call();case 22:m=e.sent,p=t.getCoinKey(d),f=t.getUSDT(p,parseFloat(m)/1e18),t.BonusUsdt+=parseFloat(f);case 26:r=!0,e.next=18;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(16),i=!0,c=e.t0;case 35:e.prev=35,e.prev=36,!r&&u.return&&u.return();case 38:if(e.prev=38,!i){e.next=41;break}throw c;case 41:return e.finish(38);case 42:return e.finish(35);case 43:case"end":return e.stop()}},e,t,[[16,31,35,43],[36,,38,42]])}))()},GetSymbolTick:function(){var t=this;return m(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.GetSymbolTick({vSymbol:["btcusdt@miniTicker","ethusdt@miniTicker","brdbtc@miniTicker","nerausdt@miniTicker"]});case 2:a=e.sent,a.vSymbolTick.forEach(function(e){t.$store.dispatch("app/changeData",{key:e.s,val:e})});case 5:case"end":return e.stop()}},e,t)}))()},getCoinKey:function(t){var e=!0,a=!1,s=void 0;try{for(var n,r=this.cashDic[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var i=n.value;if(i.sDictValue.toLowerCase()===t.toLowerCase())return i.sDictText}}catch(t){a=!0,s=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw s}}},getUSDT:function(t,e){switch(t){case"ETH":case"WETH":return(this.ETHUSDT.c*parseFloat(e)).toFixed(2);case"BRD":return this.BRDBTC&&this.BTCUSDT?(this.BRDBTC.c*this.BTCUSDT.c*parseFloat(e)).toFixed(2):"";case"NERA":case"ERAT":return(this.NERAUSDT.c*parseFloat(e)).toFixed(2);default:return 0}},initPageUser:function(){var t=this;return m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tabsList=[].concat(d(t.orgTabList)),t.getEraxNftList(),e.next=4,u.a.GetUserInfo();case 4:return t.isShow=!0,e.next=7,t.getBalanceOf();case 7:t.intervalTimer=setInterval(function(){if(!localStorage.getItem("lastFetch")){var e=(new Date).getTime()-6e5;localStorage.setItem("lastFetch",e.toString())}t.getBalanceOf();var a=parseInt(localStorage.getItem("lastFetch"));t.isFetchShow=(new Date).getTime()-a>=6e5},5e3),t.isShow=!0;case 9:case"end":return e.stop()}},e,t)}))()},handleFetch:function(){var t=this;return m(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isFetching=!0,a=Object(o.a)("0x22F9e22F125A92352cCA457Dc0DDd4c5Dd6dFa90"),e.next=4,a.methods.withdraw().send({from:t.token}).then(function(e){t.isFetchShow=!1,localStorage.setItem("lastFetch",(new Date).getTime().toString())}).catch(function(t){}).finally(function(e){t.isFetching=!1,t.getBalanceOf()});case 4:case"end":return e.stop()}},e,t)}))()},getBalanceOf:function(){var t=this;return m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.a)("0x22F9e22F125A92352cCA457Dc0DDd4c5Dd6dFa90").methods.balanceOfAccount(t.token).call().then(function(e){t.balanceVal=parseFloat(web3.utils.fromWei(e,"ether"))});case 2:case"end":return e.stop()}},e,t)}))()},goEdit:function(){var t=this;return m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.DAPPLogin();case 2:e.sent&&t.$router.push({name:"userEdit"});case 4:case"end":return e.stop()}},e,t)}))()},getEraxNftList:function(){var t=this;this.$api.GetUserEraxNftList({iPageNo:0,iPageNum:18,sWallet:this.token}).then(function(e){t.eraxInfo=e,0===e.iEraxTotal&&(t.$delete(t.tabsList,0),"accountsErac"===t.$route.name&&t.$router.replace({name:"accountsNft"}))})},initCopy:function(t){var e=this,a=document.getElementById("erax-copy-btn");if(new n.a(a).on("success",function(t){e.copySuccess=!0,setTimeout(function(){e.copySuccess=!1},2e3)}),this.sInviteCode){var s=document.getElementById("erax-copy-btn1");new n.a(s).on("success",function(t){e.copySuccess1=!0,setTimeout(function(){e.copySuccess1=!1},2e3)})}},GoWht:function(t){this.$router.push({path:t.to,query:this.$route.query})}},beforeDestroy:function(){clearInterval(this.intervalTimer)}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"erax-user"},[s("div",{staticClass:"erax-bg"}),t._v(" "),s("div",{staticClass:"erax-user-info"},[s("div",{staticClass:"erax-user-info-a"},[s("div",{staticClass:"erax-user-box"},[t.userInfo.sAvatar?s("img",{staticClass:"erax-user-img",attrs:{src:t.userInfo.sAvatar,alt:""}}):s("img",{staticClass:"erax-user-img",attrs:{src:"https://cdn.erax.io/images/avatar/e.png",alt:""}})]),t._v(" "),s("div",{staticClass:"erax-user-name"},[s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("User Name:")]),s("span",{staticClass:"desc"},[t._v(t._s(t.userInfo.sNickName||"Unnamed"))])]),t._v(" "),s("div",{staticClass:"item-border"}),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("UserID:")]),s("span",{staticClass:"desc"},[t._v(t._s(t.userInfo.iUserId))])]),t._v(" "),s("div",{staticClass:"item-border"}),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"title"},[t._v("Email:")]),s("span",{staticClass:"desc"},[t._v(t._s(t.email))])]),t._v(" "),s("el-button",{staticClass:"erax-el-btn",attrs:{icon:"el-icon-edit-outline"},on:{click:t.goEdit}})],1),t._v(" "),s("div",{staticClass:"erax-user-details"},[s("div",{staticClass:"erax-user-wallet"},[s("span",{staticClass:"title"},[t._v("Wallet Address:")]),s("span",{staticClass:"desc"},[t._v(t._s(t._f("filterCutStrMid")(t.token,24)))]),t._v(" "),s("i",{staticClass:"far fa-copy btn-copy",attrs:{id:"erax-copy-btn","data-clipboard-action":"copy","data-clipboard-text":t.token}}),t._v(" "),t.copySuccess?s("div",{staticClass:"erax-tag-success"},[s("i",{staticClass:"el-icon-circle-check icon"}),t._v("\n            "+t._s(t.$t("message.Accounts_01"))+"\n          ")]):t._e()]),t._v(" "),t.sInviteCode?s("div",{staticClass:"erax-user-wallet"},[s("span",{staticClass:"title"},[t._v("Invite Code:")]),s("span",{staticClass:"desc"},[t._v(t._s(t.sInviteCode))]),t._v(" "),s("i",{staticClass:"far fa-copy btn-copy",attrs:{id:"erax-copy-btn1","data-clipboard-action":"copy","data-clipboard-text":t.sInviteCode}}),t._v(" "),t.copySuccess1?s("div",{staticClass:"erax-tag-success"},[s("i",{staticClass:"el-icon-circle-check icon"}),t._v("\n            "+t._s(t.$t("message.Accounts_01"))+"\n          ")]):t._e()]):t._e()])])]),t._v(" "),s("div",{staticClass:"erax-user-content"},[s("div",{staticClass:"erax-layout"},[s("ul",{staticClass:"erax-tabs"},t._l(t.tabsList,function(e,a){return s("li",{key:a,class:["erax-tabs-item",{active:t.$route.path===e.to}],on:{click:function(a){return t.GoWht(e)}}},[t._v("\n          "+t._s(t.$t(e.label))+"\n        ")])}),0),t._v(" "),s("div",{staticStyle:{padding:"40px 0"}},["/accounts/erac"===t.$route.path?s("div",{staticClass:"erax-user-balance"},[s("div",{staticClass:"erax-user-balance-left"},[s("div",{staticClass:"erax-balance erax-balance-lr"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:a("EbKn"),alt:""}}),t._v(" "),s("div",[t._v(t._s(t.$t("message.Accounts_47")))])]),t._v(" "),s("div",[s("p",{staticClass:"erax-balance-des"},[t._v("\n                "+t._s(t.$t("message.Accounts_02"))+"："),s("span",{staticClass:"value"},[t._v(t._s(t.eraxInfo.iEraxTotal))])]),t._v(" "),s("p",{staticClass:"erax-balance-des"},[t._v("\n                "+t._s(t.$t("message.Erac_03"))+"："),s("span",{staticClass:"value"},[t._v(t._s(t.eraxInfo.iValueTotal))])]),t._v(" "),s("p",{staticClass:"erax-balance-des"},[t._v("\n                "+t._s(t.$t("message.Erac_04"))+"："),s("span",{staticClass:"value"},[t._v(t._s(t._f("filterThousands")(t.eraxInfo.iSpeedTotal)))])])])]),t._v(" "),s("div",{staticClass:"border"}),t._v(" "),s("div",{ref:"eraxBalance",staticClass:"erax-balance erax-balance-r"},[s("h2",{staticClass:"erax-balance-title"},[t._v("\n                "+t._s(t.$t("message.Accounts_03"))+"\n              ")]),t._v(" "),s("p",{staticClass:"erax-balance-total"},[s("countTo",{staticClass:"txt2",attrs:{decimals:6,startVal:t.startVal,endVal:t.endVal,duration:3e3}}),t._v(" "),t._e()],1),t._v(" "),t.isFetchShow&&t.endVal>0?s("el-button",{staticClass:"erax-btn-fetch",attrs:{loading:t.isFetching},on:{click:t.handleFetch}},[t._v("\n                "+t._s(t.isFetching?t.$t("message.Other_31"):t.$t("message.Other_30"))+"\n              ")]):t._e(),t._v(" "),s("div",{class:["erax-balance-record",{show:t.balanceShow}]},[s("el-tabs",{staticClass:"erax-el-tabs",model:{value:t.activeRecord,callback:function(e){t.activeRecord=e},expression:"activeRecord"}},[s("el-tab-pane",{attrs:{label:t.$t("message.Accounts_16"),name:"wa"}},[s("el-table",{staticClass:"erax-user-table",staticStyle:{width:"100%"},attrs:{data:t.recordGold,"max-height":"360"}},[s("el-table-column",{attrs:{align:"center",prop:"time",label:t.$t("message.Accounts_17")}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"prise",label:t.$t("message.Accounts_18")}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"totalPrise",label:t.$t("message.Accounts_19")}})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{label:t.$t("message.Accounts_20"),name:"tou"}},[s("el-table",{staticClass:"erax-user-table",staticStyle:{width:"100%"},attrs:{data:t.recordAirdrop,"max-height":"360"}},[s("el-table-column",{attrs:{width:"70",align:"center",prop:"time",label:t.$t("message.Accounts_17")}}),t._v(" "),s("el-table-column",{attrs:{width:"68",align:"center",prop:"mission",label:t.$t("message.Accounts_21")}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"prise",label:t.$t("message.Accounts_18")}}),t._v(" "),s("el-table-column",{attrs:{"min-width":"48",align:"center",prop:"totalPrise",label:t.$t("message.Accounts_19")}})],1)],1)],1)],1)],1)]),t._v(" "),s("div",{staticClass:"erax-user-balance-left erax-user-balance-right"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:a("EbKn"),alt:""}}),t._v(" "),s("div",[t._v(t._s(t.$t("message.Accounts_46")))])]),t._v(" "),s("div",{staticClass:"border"}),t._v(" "),s("div",{ref:"eraxBalance",staticClass:"erax-balance erax-balance-r"},[s("h2",{staticClass:"erax-balance-title"},[t._v("\n                 "+t._s(t.$t("message.Accounts_45"))+"\n              ")]),t._v(" "),s("p",{staticClass:"erax-balance-total"},[t._v("\n                "+t._s(t.$util.format(parseFloat(t.BonusUsdt.toFixed(6))))+"\n                "),t._e()])]),t._v(" "),s("div")])]):t._e(),t._v(" "),t.isShow?s("router-view"):t._e()],1)])])])},staticRenderFns:[]};var h=a("VU/8")(p,f,!1,function(t){a("TWYG")},"data-v-d697e26c",null);e.default=h.exports},TWYG:function(t,e){}});