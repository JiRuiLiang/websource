webpackJsonp([21],{"1MCA":function(e,t){},MX58:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("TIfe"),i=(s("mtWM"),s("ytf2"));s("NYxO");function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function a(i,n){try{var r=t[i](n),o=r.value}catch(e){return void s(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var r={data:function(){return{email:"",eye1:!1,eye2:!1,word1:"",word2:"",code:"",daley:0,deleyTimeId:null,sInviteCode:"",inviteCode:"",gift:"100",regesterSuc:!1,isError:!1}},computed:{btnDisable:function(){var e=new RegExp("^[a-zA-Z0-9]+([._\\-]*[A-Za-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),t=new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$");return!this.email||!e.test(this.email)||(!t.test(this.word1)||(this.word1!=this.word2||(!this.code||this.code.length<6)))}},mounted:function(){},methods:{onClose:function(){this.regesterSuc=!1,this.$router.replace("/main")},showPassword1:function(){this.eye1=!this.eye1},onBlur:function(){new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$").test(this.word1)?this.isError=!1:this.isError=!0},userRegister:function(){var e=this;return n(regeneratorRuntime.mark(function t(){var s,n,r,o,c,l,u,d,m,v,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.UserRegister({iSource:1,iRegisterType:2,sPassword:e.word1,sEmail:e.email,sEmailVerifyCode:e.code,sInviteCode:e.sInviteCode});case 2:return s=t.sent,n=s.sSessionKey,t.next=6,ethereum.request({method:"eth_requestAccounts"});case 6:return r=t.sent,o=r[0],t.next=10,e.$api.QueryChainInfo({sChain:"Ethereum",sAddress:o});case 10:return c=t.sent,l=c.sNonce,u=c.sChain,Object(i.b)(),t.next=16,web3.eth.personal.sign(l,o,function(e,t){if(e)return!1});case 16:return d=t.sent,a.a.setToken(n),t.next=20,e.$api.UserBindChain({sChain:u,sAddress:o,sSignature:d,iSource:1}).catch(function(e){a.a.setToken("")});case 20:if((m=t.sent)&&!(!m.iRspCode<0)){t.next=23;break}return t.abrupt("return");case 23:return localStorage.setItem("Email",e.email),t.next=26,e.$api.GetUserExten({sAddress:o});case 26:v=t.sent,(_=v.stUserExtenInfo).owner=!0,e.$store.dispatch("user/GET_USERINFO",_||{}),e.$nextTick(function(){e.$router.replace("/")});case 31:case"end":return t.stop()}},t,e)}))()},showPassword2:function(){this.eye2=!this.eye2},toRouter:function(){},getCode:function(){var e=this;return n(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=new RegExp("^[a-zA-Z0-9]+([._\\-]*[A-Za-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),e.email&&s.test(e.email)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$api.CheckRegistered({iRegisterType:2,sEmail:e.email});case 5:return t.next=7,e.$api.SendEmailVerifyCode({iSource:1,iSendMethod:2,iVerifyBusi:1,sEmail:e.email});case 7:e.daley=60,e.deleyTimeId=setInterval(function(){e.daley--,e.daley<=0&&clearInterval(e.deleyTimeId)},1e3);case 9:case"end":return t.stop()}},t,e)}))()}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sign-email"},[s("div",{staticClass:"container"},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("message.email_account_6")))]),e._v(" "),s("div",{staticClass:"title1"},[e._v(e._s(e.$t("message.email_account_2"))+"*")]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{placeholder:e.$t("message.email_account_2")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_15"))+"*")]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{maxlength:"6",placeholder:e.$t("message.email_account_9")},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[s("template",{slot:"append"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.daley,expression:"!daley"}],staticClass:"send",on:{click:e.getCode}},[e._v(e._s(e.$t("message.email_account_12")))]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.daley,expression:"daley"}],staticClass:"send"},[e._v(e._s(e.daley)+"s")])])],2),e._v(" "),s("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_14"))+"*")]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_8"),type:e.eye1?"text":"password"},on:{blur:e.onBlur},model:{value:e.word1,callback:function(t){e.word1=t},expression:"word1"}},[s("template",{slot:"append"},[e.eye1?s("i",{staticClass:"fas fa-eye",on:{click:function(t){e.eye1=!e.eye1}}}):s("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.eye1=!e.eye1}}})])],2),e._v(" "),s("div",{staticClass:"error-tips"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.isError,expression:"isError"}]},[e._v(e._s(e.$t("message.email_account_28")))])]),e._v(" "),s("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_29"))+"*")]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_8"),type:e.eye2?"text":"password"},model:{value:e.word2,callback:function(t){e.word2=t},expression:"word2"}},[s("template",{slot:"append"},[e.eye2?s("i",{staticClass:"fas fa-eye",on:{click:function(t){e.eye2=!e.eye2}}}):s("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.eye2=!e.eye2}}})])],2),e._v(" "),s("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_16")))]),e._v(" "),s("el-input",{staticClass:"txt",attrs:{placeholder:e.$t("message.email_account_9")},model:{value:e.sInviteCode,callback:function(t){e.sInviteCode=t},expression:"sInviteCode"}}),e._v(" "),s("el-button",{staticClass:"o-login",attrs:{round:"",size:"large",disabled:e.btnDisable},on:{click:e.userRegister}},[e._v(e._s(e.$t("message.email_account_31"))+"\n    ")]),e._v(" "),s("div",{staticClass:"tips"},[e._v("\n      "+e._s(e.$t("message.email_account_10"))),s("span",{staticClass:"link",on:{click:e.toRouter}},[e._v(e._s(e.$t("message.email_account_11")))])])],1)])},staticRenderFns:[]};var c=s("VU/8")(r,o,!1,function(e){s("1MCA")},"data-v-344ff69b",null);t.default=c.exports}});