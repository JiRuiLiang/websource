webpackJsonp([29],{MX58:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("TIfe"),n=(a("mtWM"),a("ytf2"));a("NYxO");function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function s(n,i){try{var r=t[n](i),c=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(c).then(function(e){s("next",e)},function(e){s("throw",e)});e(c)}("next")})}}var r={data:function(){return{email:"",eye1:!1,eye2:!1,word1:"",word2:"",code:"",daley:0,deleyTimeId:null,sInviteCode:"",inviteCode:"",gift:"100",regesterSuc:!1,isError:!1,captcha:{}}},computed:{btnDisable:function(){var e=new RegExp("^[a-zA-Z0-9]+([._\\-]*[A-Za-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),t=new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$");return!this.email||!e.test(this.email)||(!t.test(this.word1)||(this.word1!=this.word2||(!this.code||4!=this.code.length)))}},mounted:function(){this.getCaptcha()},methods:{onClose:function(){this.regesterSuc=!1,this.$router.replace("/main")},showPassword1:function(){this.eye1=!this.eye1},onBlur:function(){new RegExp("^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$").test(this.word1)?this.isError=!1:this.isError=!0},getCaptcha:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$api.GetCaptcha({iVerifyBusi:1});case 2:a=t.sent,e.captcha=a,console.log(a);case 5:case"end":return t.stop()}},t,e)}))()},userRegister:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.$api.UserRegister({iSource:1,iRegisterType:2,sPassword:e.word1,sEmail:e.email,sEmailVerifyCode:e.captcha.sUuid+"|"+e.code,sInviteCode:e.sInviteCode}).then(function(){var t=i(regeneratorRuntime.mark(function t(a){var i,r,c,o,l,u,d,m,p,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.sSessionKey,t.next=3,ethereum.request({method:"eth_requestAccounts"});case 3:return r=t.sent,c=r[0],t.next=7,e.$api.QueryChainInfo({sChain:"Ethereum",sAddress:c});case 7:return o=t.sent,l=o.sNonce,u=o.sChain,Object(n.b)(),t.next=13,web3.eth.personal.sign(l,c,function(e,t){if(e)return!1});case 13:return d=t.sent,s.a.setToken(i),t.next=17,e.$api.UserBindChain({sChain:u,sAddress:c,sSignature:d,iSource:1}).catch(function(t){s.a.setToken(""),e.getCaptcha()});case 17:if((m=t.sent)&&!(!m.iRspCode<0)){t.next=20;break}return t.abrupt("return");case 20:return localStorage.setItem("Email",e.email),t.next=23,e.$api.GetUserExten({sAddress:c});case 23:p=t.sent,(h=p.stUserExtenInfo).owner=!0,e.$store.dispatch("user/GET_USERINFO",h||{}),e.$nextTick(function(){e.$router.replace("/")});case 28:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){e.getCaptcha()});case 1:case"end":return t.stop()}},t,e)}))()},showPassword2:function(){this.eye2=!this.eye2},toRouter:function(){},getCode:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new RegExp("^[a-zA-Z0-9]+([._\\-]*[A-Za-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$"),e.email&&a.test(e.email)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.$api.CheckRegistered({iRegisterType:2,sEmail:e.email});case 5:return t.next=7,e.$api.SendEmailVerifyCode({iSource:1,iSendMethod:2,iVerifyBusi:1,sEmail:e.email});case 7:e.daley=60,e.deleyTimeId=setInterval(function(){e.daley--,e.daley<=0&&clearInterval(e.deleyTimeId)},1e3);case 9:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sign-email"},[a("div",{staticClass:"container"},[a("div",{staticClass:"title"},[e._v(e._s(e.$t("message.email_account_6")))]),e._v(" "),a("div",{staticClass:"title1"},[e._v(e._s(e.$t("message.email_account_2"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{placeholder:e.$t("message.email_account_2")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_15"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{maxlength:"6",placeholder:e.$t("message.email_account_7")},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[a("template",{slot:"append"},[a("div",{staticClass:"captcha"},[a("img",{staticClass:"o-captcha",attrs:{src:e.captcha.sCaptcha,alt:""},on:{click:function(t){return t.stopPropagation(),e.getCaptcha(t)}}})])])],2),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_14"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_8"),type:e.eye1?"text":"password"},on:{blur:e.onBlur},model:{value:e.word1,callback:function(t){e.word1=t},expression:"word1"}},[a("template",{slot:"append"},[e.eye1?a("i",{staticClass:"fas fa-eye",on:{click:function(t){e.eye1=!e.eye1}}}):a("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.eye1=!e.eye1}}})])],2),e._v(" "),a("div",{staticClass:"error-tips"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isError,expression:"isError"}]},[e._v(e._s(e.$t("message.email_account_28")))])]),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_29"))+"*")]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{maxlength:"16",placeholder:e.$t("message.email_account_8"),type:e.eye2?"text":"password"},model:{value:e.word2,callback:function(t){e.word2=t},expression:"word2"}},[a("template",{slot:"append"},[e.eye2?a("i",{staticClass:"fas fa-eye",on:{click:function(t){e.eye2=!e.eye2}}}):a("i",{staticClass:"fas fa-eye-slash",on:{click:function(t){e.eye2=!e.eye2}}})])],2),e._v(" "),a("div",{staticClass:"title2"},[e._v(e._s(e.$t("message.email_account_16")))]),e._v(" "),a("el-input",{staticClass:"txt",attrs:{placeholder:e.$t("message.email_account_9")},model:{value:e.sInviteCode,callback:function(t){e.sInviteCode=t},expression:"sInviteCode"}}),e._v(" "),a("el-button",{staticClass:"o-login",attrs:{round:"",size:"large",disabled:e.btnDisable},on:{click:e.userRegister}},[e._v(e._s(e.$t("message.email_account_31"))+"\n    ")]),e._v(" "),a("div",{staticClass:"tips"},[e._v("\n      "+e._s(e.$t("message.email_account_10"))),a("span",{staticClass:"link",on:{click:e.toRouter}},[e._v(e._s(e.$t("message.email_account_11")))])])],1)])},staticRenderFns:[]};var o=a("VU/8")(r,c,!1,function(e){a("W3mm")},"data-v-219a5264",null);t.default=o.exports},W3mm:function(e,t){}});