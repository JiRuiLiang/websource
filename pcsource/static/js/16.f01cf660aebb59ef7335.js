webpackJsonp([16],{Xd8F:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("TQvf"),n=s.n(a),i=s("NYxO"),r={props:{dataInfo:{type:Object,default:function(){}},poolAbi:{type:String,default:function(){return""}}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reward-item"},[s("div",{staticClass:"title"},[s("img",{attrs:{src:t.dataInfo.icon,alt:""}}),t._v(" "),s("div",[t._v(t._s(t.dataInfo.name))])]),t._v(" "),s("el-row",{staticClass:"list"},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_31")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.inviteNum)))])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_33")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t.dataInfo.inviteRate)+"%")])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_34")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.InviterReward)))])]),t._v(" "),s("div",{staticClass:"txt"},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_35")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.noGet)))])])]),t._v(" "),s("el-col",{attrs:{span:12}},[s("span",{staticClass:"txt1"},[t._v(t._s(t.$t("message.stake_32")))]),s("span",{staticClass:"txt2"},[t._v(t._s(t._f("filterThousands")(t.dataInfo.activeNum)))])])],1)],1)},staticRenderFns:[]};var o=s("VU/8")(r,c,!1,function(t){s("xNi4")},"data-v-b3f10cf2",null).exports,u=s("Tnm7"),l=s("ytf2");function v(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function a(n,i){try{var r=e[n](i),c=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(c).then(function(t){a("next",t)},function(t){a("throw",t)});t(c)}("next")})}}var d={components:{RewardItem:o},data:function(){return{list:[],detailList:[],poolAbi:"",abi:"",address:"",isRequest:!1}},computed:(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t})({},Object(i.c)({mateMaskToken:function(t){return t.app.mateMaskToken}})),watch:{mateMaskToken:function(){this.initConfig()}},mounted:function(){var t=this;this.initConfig(),this.$nextTick(function(){t.initCopy()})},methods:{getUrl:function(){return window.location.origin+"/staking?address="+this.mateMaskToken},initCopy:function(){var t=this,e=document.getElementById("copyBtn"),s=new n.a(e);s.on("success",function(){t.$message.success(t.$t("message.lang_62"))}),s.on("error",function(t){})},initConfig:function(){var t=this;return v(regeneratorRuntime.mark(function e(){var s,a,n,i,r,c,o,v,d,f,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isRequest){e.next=2;break}return e.abrupt("return");case 2:return t.isRequest=!0,t.list=[],t.detailList=[],e.next=7,t.$api.GetSystemConfig({sAppId:"Erax-dev",sKey1:"ERC20"});case 7:return s=e.sent,Object(u.k)(s.vList),e.next=11,t.$api.GetSystemConfig({sAppId:"Erax-dev",sKey1:"Stake"});case 11:for(a=e.sent,n=a.vList,i=!0,r=!1,c=void 0,e.prev=16,o=n[Symbol.iterator]();!(i=(v=o.next()).done);i=!0)"dataAbi"===(d=v.value).sKey2?t.abi=d.sValue:"stakeAddress"===d.sKey2?t.address=d.sValue:"poorAbi"===d.sKey2&&(t.poolAbi=d.sValue);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),r=!0,c=e.t0;case 24:e.prev=24,e.prev=25,!i&&o.return&&o.return();case 27:if(e.prev=27,!r){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:return Object(l.b)(),t.contract=new web3.eth.Contract(JSON.parse(t.abi),t.address),e.next=36,t.contract.methods.getPoolsLength().call();case 36:f=e.sent,p=0;case 38:if(!(p<f)){e.next=46;break}return e.next=41,t.contract.methods.getPoolInfo(p).call();case 41:m=e.sent,t.list.push(m);case 43:p++,e.next=38;break;case 46:t.updateList();case 47:case"end":return e.stop()}},e,t,[[16,20,24,32],[25,,27,31]])}))()},updateList:function(){var t=this;return v(regeneratorRuntime.mark(function e(){var s,a,n,i,r,c,o,l,v,d,f,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.mateMaskToken||!t.list.length){e.next=61;break}s=!0,a=!1,n=void 0,e.prev=4,i=t.list[Symbol.iterator]();case 6:if(s=(r=i.next()).done){e.next=47;break}return c=r.value,o=new web3.eth.Contract(JSON.parse(t.poolAbi),c[6]),(l={}).name=c[1],l.icon=u.f[c[3].toLowerCase()],e.next=14,o.methods.getAccountCountOfInviter(t.mateMaskToken).call();case 14:return l.inviteNum=e.sent,e.next=17,o.methods.getActiveAccountCountOfInviter(t.mateMaskToken).call();case 17:return l.activeNum=e.sent,e.next=20,o.methods.getInviterReward(t.mateMaskToken).call();case 20:return l.InviterReward=e.sent,e.next=23,o.methods.getInviteRate(t.mateMaskToken).call();case 23:return l.inviteRate=e.sent,e.next=26,o.methods.getAccountCountOfInviter(t.mateMaskToken).call();case 26:v=e.sent,d=0,f=0;case 29:if(!(f<v)){e.next=40;break}return e.next=32,o.methods.getAccountOfInviter(t.mateMaskToken,f).call();case 32:return p=e.sent,e.next=35,o.methods.earned(p).call();case 35:m=e.sent,d+=parseFloat(web3.utils.fromWei(m));case 37:f++,e.next=29;break;case 40:d=d/100*parseFloat(l.inviteRate),l.InviterReward=parseFloat(web3.utils.fromWei(l.InviterReward+"")).toFixed(4),l.noGet=d.toFixed(4),t.detailList.push(l);case 44:s=!0,e.next=6;break;case 47:e.next=53;break;case 49:e.prev=49,e.t0=e.catch(4),a=!0,n=e.t0;case 53:e.prev=53,e.prev=54,!s&&i.return&&i.return();case 56:if(e.prev=56,!a){e.next=59;break}throw n;case 59:return e.finish(56);case 60:return e.finish(53);case 61:t.isRequest=!1;case 62:case"end":return e.stop()}},e,t,[[4,49,53,61],[54,,56,60]])}))()}}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"invite-staking"},[s("div",{staticClass:"title"},[t._v(t._s(t.$t("message.stake_28")))]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"main-container"},[s("div",{staticClass:"top"},[s("div",{staticClass:"invite-url"},[s("div",{staticClass:"url"},[s("span",{staticClass:"desc"},[t._v(t._s(t.$t("message.stake_29"))+":")]),t._v(" "),s("span",{staticClass:"link"},[t._v(t._s(t.getUrl()))]),t._v(" "),s("i",{staticClass:"iconfont icon-fuzhi",attrs:{id:"copyBtn","data-clipboard-action":"copy","data-clipboard-text":t.getUrl()}})]),t._v(" "),s("i",{staticClass:"iconfont icon-shuaxing",on:{click:function(e){return t.initConfig()}}})])]),t._v(" "),s("div",{staticClass:"desc reward"},[t._v(t._s(t.$t("message.stake_30"))+":")]),t._v(" "),s("div",{staticClass:"bottom"},t._l(t.detailList,function(t,e){return s("reward-item",{key:e,attrs:{dataInfo:t}})}),1)])])])},staticRenderFns:[]};var p=s("VU/8")(d,f,!1,function(t){s("mj6b")},"data-v-770efbbd",null);e.default=p.exports},mj6b:function(t,e){},xNi4:function(t,e){}});