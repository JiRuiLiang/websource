webpackJsonp([8],{"4oEQ":function(t,e){},"8lJI":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),n=a.n(i),r=a("exGp"),o=a.n(r),s={components:{},name:"CollectionDetail",data:function(){return{dialogVisible:!1,dataInfo:{},iCollectionId:0,list:[],temp:"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png",form:{imageUrl:"",name:"",description:""}}},mounted:function(){var t=this.$route.query.id;this.iCollectionId=parseInt(t),this.initView()},methods:{initView:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.GetCollectionDetail({iCollectionId:t.iCollectionId,iUserId:123});case 2:t.dataInfo=e.sent,t.getItemList();case 4:case"end":return e.stop()}},e,t)}))()},onItemDetail:function(t){this.$router.push({name:"item-detail",query:{iItemId:t.iItemId,iCollectionId:this.iCollectionId}})},onClickCreate:function(){var t=this;return o()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.form.imageUrl){e.next=2;break}return e.abrupt("return");case 2:if(t.form.name){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.$api.CreateItem({iCollectionId:t.iCollectionId,sItemName:t.form.name,sItemData:t.form.imageUrl});case 6:e.sent,t.getItemList(),t.dialogVisible=!1;case 9:case"end":return e.stop()}},e,t)}))()},getItemList:function(){var t=this;return o()(n.a.mark(function e(){var a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$api.GetItemList({iCollectionId:t.iCollectionId,iUserId:123});case 2:a=e.sent,i=a.vItems,t.list=i;case 5:case"end":return e.stop()}},e,t)}))()},handleAvatarSuccess:function(t,e){t.iRspCode||(this.form.imageUrl=t.data.vUrlPath[0])},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),e}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collection-detail"},[a("el-image",{attrs:{src:t.dataInfo.stCollection&&t.dataInfo.stCollection.sLogoImg,alt:""}}),t._v(" "),a("div",[t._v(t._s(t.dataInfo.sCollectionName))]),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[t._v("ITEMS")]),t._v(" "),a("el-button",{staticClass:"btn",staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("Add New Iem")]),t._v(" "),a("div",{staticClass:"list"},t._l(t.list,function(e,i){return a("el-card",{key:i,staticClass:"item",attrs:{shadow:"hover"},nativeOn:{click:function(a){return t.onItemDetail(e)}}},[a("div",{staticClass:"imgDiv"},[a("img",{staticClass:"image",attrs:{src:e.sItemDataUrl}})]),t._v(" "),a("div",{staticClass:"desc"},[t._v(t._s(e.sItemName))])])}),1),t._v(" "),a("el-dialog",{attrs:{title:"Create new item",visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("You can change these values later, along with configuring external\n      URLs, payment options, and trading fees.")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",[a("el-row",[t._v("Logo")]),t._v(" "),a("el-row",[t._v("(350 x 350 recommended)")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://192.168.80.202:10001/v1/oss/PublicUpload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,accept:"image/gif, image/jpeg, image/png"}},[t.form.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.form.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",[a("el-row",[t._v("Name*")]),t._v(" "),a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onClickCreate}},[t._v("Create")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(t){a("4oEQ")},"data-v-10f654a4",null);e.default=c.exports}});