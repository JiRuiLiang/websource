webpackJsonp([21],{"2AnY":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("TQvf"),r=a.n(s),n=a("NYxO"),i=a("WBHA"),c=a.n(i),o=(a("oFuF"),a("ytf2")),l=a("TIfe"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t};function m(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function f(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(r,n){try{var i=e[r](n),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){s("next",t)},function(t){s("throw",t)});t(c)}("next")})}}var d={components:{countTo:c.a},name:"user",data:function(){return{intervalTimer:null,copySuccess:!1,balanceShow:!1,isShow:!1,activeRecord:"wa",eraxInfo:{},startVal:0,endVal:0,orgTabList:[{to:"/accounts/erac",label:"message.Accounts_41"},{to:"/accounts/nft",label:"message.Accounts_42"},{to:"/accounts/favorite",label:"message.Accounts_05"},{to:"/accounts/follow",label:"message.Accounts_06"}],tabsList:[],uWallet:"",recordGold:[{time:"2021-04-18",prise:5124,totalPrise:15372},{time:"2021-04-18",prise:5124,totalPrise:15372},{time:"2021-04-18",prise:534,totalPrise:15372}],recordAirdrop:[{time:"2021-04-18",mission:"首次分享",prise:5124,totalPrise:153762},{time:"2021-04-19",mission:"首次分享",prise:5124,totalPrise:153372},{time:"2021-04-20",mission:"首次分享",prise:524,totalPrise:15372},{time:"2021-04-21",mission:"首次分享",prise:524,totalPrise:15372},{time:"2021-04-22",mission:"首次分享",prise:524,totalPrise:153572},{time:"2021-04-23",mission:"首次分享",prise:524,totalPrise:15372},{time:"2021-04-24",mission:"首次分享",prise:54,totalPrise:155472},{time:"2021-04-25",mission:"首次分享",prise:54,totalPrise:15372}],isFetching:!1,isFetchShow:!1,balanceVal:0}},computed:u({},Object(n.b)(["token","userInfo"]),Object(n.c)({})),watch:{token:function(t,e){return t},userInfo:function(t){return t},balanceVal:function(t,e){if(!e)return this.startVal=t,this.endVal=t,t;this.startVal=e,this.endVal=t}},mounted:function(){var t=this;return f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.initCopy(),e.next=3,t.initPageUser();case 3:case"end":return e.stop()}},e,t)}))()},methods:{initPageUser:function(){var t=this;return f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.tabsList=[].concat(m(t.orgTabList)),t.getEraxNftList(),e.next=4,l.a.GetUserInfo();case 4:return t.isShow=!0,e.next=7,t.getBalanceOf();case 7:t.intervalTimer=setInterval(function(){if(!localStorage.getItem("lastFetch")){var e=(new Date).getTime()-6e5;localStorage.setItem("lastFetch",e.toString())}t.getBalanceOf();var a=parseInt(localStorage.getItem("lastFetch"));t.isFetchShow=(new Date).getTime()-a>=6e5},5e3),t.isShow=!0;case 9:case"end":return e.stop()}},e,t)}))()},handleFetch:function(){var t=this;return f(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isFetching=!0,a=Object(o.a)("0x22F9e22F125A92352cCA457Dc0DDd4c5Dd6dFa90"),e.next=4,a.methods.withdraw().send({from:t.token}).then(function(e){t.isFetchShow=!1,localStorage.setItem("lastFetch",(new Date).getTime().toString())}).catch(function(t){}).finally(function(e){t.isFetching=!1,t.getBalanceOf()});case 4:case"end":return e.stop()}},e,t)}))()},getBalanceOf:function(){var t=this;return f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(o.a)("0x22F9e22F125A92352cCA457Dc0DDd4c5Dd6dFa90").methods.balanceOfAccount(t.token).call().then(function(e){t.balanceVal=parseFloat(web3.utils.fromWei(e,"ether"))});case 2:case"end":return e.stop()}},e,t)}))()},goEdit:function(){var t=this;return f(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.DAPPLogin();case 2:e.sent&&t.$router.push({name:"userEdit"});case 4:case"end":return e.stop()}},e,t)}))()},getEraxNftList:function(){var t=this;this.$api.GetUserEraxNftList({iPageNo:0,iPageNum:18,sWallet:this.token}).then(function(e){t.eraxInfo=e,0===e.iEraxTotal&&(t.$delete(t.tabsList,0),"accountsErac"===t.$route.name&&t.$router.replace({name:"accountsNft"}))})},initCopy:function(t){var e=this,a=document.getElementById("erax-copy-btn");new r.a(a).on("success",function(t){e.copySuccess=!0,setTimeout(function(){e.copySuccess=!1},2e3)})},GoWht:function(t){this.$router.push({path:t.to,query:this.$route.query})}},beforeDestroy:function(){clearInterval(this.intervalTimer)}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"erax-user"},[s("div",{staticClass:"erax-bg"},[s("div",{staticClass:"erax-user-info"},[s("div",{staticClass:"erax-user-info-a"},[s("div",{staticClass:"erax-user-box"},[t.userInfo.sAvatar?s("img",{staticClass:"erax-user-img",attrs:{src:t.userInfo.sAvatar,alt:""}}):s("img",{staticClass:"erax-user-img",attrs:{src:a("SSeM"),alt:""}})]),t._v(" "),s("div",{staticClass:"erax-user-details"},[s("h2",{staticClass:"erax-user-name"},[t._v("Hello, "+t._s(t.userInfo.sNickName||"Unnamed")+"!")]),t._v(" "),s("div",{staticClass:"erax-user-wallet"},[t._v("\n            "+t._s(t._f("filterCutStrMid")(t.token,24))+"\n            "),s("i",{staticClass:"far fa-copy btn-copy",attrs:{id:"erax-copy-btn","data-clipboard-action":"copy","data-clipboard-text":t.token}}),t._v(" "),t.copySuccess?s("div",{staticClass:"erax-tag-success"},[s("i",{staticClass:"el-icon-circle-check icon"}),t._v(" "+t._s(t.$t("message.Accounts_01"))+"\n            ")]):t._e()]),t._v(" "),s("div",[s("el-button",{staticClass:"erax-el-btn",attrs:{icon:"el-icon-edit"},on:{click:t.goEdit}})],1)])]),t._v(" "),s("div",{staticClass:"erax-user-balance"},[s("div",{staticClass:"erax-balance"},[s("h2",{staticClass:"erax-balance-title"},[t._v(t._s(t.$t("message.Accounts_02")))]),t._v(" "),s("p",{staticClass:"erax-balance-total"},[t._v(t._s(t.eraxInfo.iEraxTotal))]),t._v(" "),s("p",{staticClass:"erax-balance-des"},[t._v(t._s(t.$t("message.Erac_03"))+"："+t._s(t.eraxInfo.iValueTotal))])]),t._v(" "),s("div",{staticClass:"border"}),t._v(" "),s("div",{ref:"eraxBalance",staticClass:"erax-balance"},[s("h2",{staticClass:"erax-balance-title"},[t._v(t._s(t.$t("message.Accounts_03")))]),t._v(" "),s("p",{staticClass:"erax-balance-total"},[s("countTo",{staticClass:"txt2",attrs:{decimals:6,startVal:t.startVal,endVal:t.endVal,duration:3e3}}),t._v(" "),t._e()],1),t._v(" "),s("p",{staticClass:"erax-balance-des"},[t._v(t._s(t.$t("message.Erac_04"))+"："+t._s(t._f("filterThousands")(t.eraxInfo.iSpeedTotal)))]),t._v(" "),t.isFetchShow&&t.endVal>0?s("el-button",{staticClass:"erax-btn-fetch",attrs:{loading:t.isFetching},on:{click:t.handleFetch}},[t._v(" "+t._s(t.isFetching?t.$t("message.Other_31"):t.$t("message.Other_30"))+"\n          ")]):t._e(),t._v(" "),s("div",{class:["erax-balance-record",{show:t.balanceShow}]},[s("el-tabs",{staticClass:"erax-el-tabs",model:{value:t.activeRecord,callback:function(e){t.activeRecord=e},expression:"activeRecord"}},[s("el-tab-pane",{attrs:{label:t.$t("message.Accounts_16"),name:"wa"}},[s("el-table",{staticClass:"erax-user-table",staticStyle:{width:"100%"},attrs:{data:t.recordGold,"max-height":"360"}},[s("el-table-column",{attrs:{align:"center",prop:"time",label:t.$t("message.Accounts_17")}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"prise",label:t.$t("message.Accounts_18")}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"totalPrise",label:t.$t("message.Accounts_19")}})],1)],1),t._v(" "),s("el-tab-pane",{attrs:{label:t.$t("message.Accounts_20"),name:"tou"}},[s("el-table",{staticClass:"erax-user-table",staticStyle:{width:"100%"},attrs:{data:t.recordAirdrop,"max-height":"360"}},[s("el-table-column",{attrs:{width:"70",align:"center",prop:"time",label:t.$t("message.Accounts_17")}}),t._v(" "),s("el-table-column",{attrs:{width:"68",align:"center",prop:"mission",label:t.$t("message.Accounts_21")}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"prise",label:t.$t("message.Accounts_18")}}),t._v(" "),s("el-table-column",{attrs:{"min-width":"48",align:"center",prop:"totalPrise",label:t.$t("message.Accounts_19")}})],1)],1)],1)],1)],1)])])]),t._v(" "),s("div",{staticClass:"erax-user-content"},[s("div",{staticClass:"erax-layout"},[s("ul",{staticClass:"erax-tabs"},t._l(t.tabsList,function(e,a){return s("li",{key:a,class:["erax-tabs-item",{active:t.$route.path===e.to}],on:{click:function(a){return t.GoWht(e)}}},[t._v("\n          "+t._s(t.$t(e.label))+"\n        ")])}),0),t._v(" "),s("div",{staticStyle:{padding:"40px 0"}},[t.isShow?s("router-view"):t._e()],1)])])])},staticRenderFns:[]};var h=a("VU/8")(d,v,!1,function(t){a("Szgq")},"data-v-65976e82",null);e.default=h.exports},Szgq:function(t,e){}});